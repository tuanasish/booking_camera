================================================================================
          Há»† THá»NG QUáº¢N LÃ BOOKING CHO THUÃŠ MÃY áº¢NH - KANTRA CAMERA
                         Káº¾ HOáº CH NGHIá»†P Vá»¤ CHI TIáº¾T
================================================================================

I. Tá»”NG QUAN Há»† THá»NG
================================================================================

1.1. Má»¥c Ä‘Ã­ch:
    - Thay tháº¿ Excel báº±ng há»‡ thá»‘ng web-based
    - Quáº£n lÃ½ lá»‹ch cho thuÃª mÃ¡y áº£nh hiá»‡u quáº£
    - Theo dÃµi tráº¡ng thÃ¡i thanh toÃ¡n real-time
    - PhÃ¢n quyá»n quáº£n lÃ½/nhÃ¢n viÃªn
    - Thá»‘ng kÃª doanh thu

1.2. CÃ´ng nghá»‡ sá»­ dá»¥ng:
    - Frontend: Next.js 14 + TypeScript
    - Styling: Vanilla CSS (dark mode support)
    - Database: Supabase (PostgreSQL)
    - Authentication: Supabase Auth

================================================================================

II. PHÃ‚N QUYá»€N NGÆ¯á»œI DÃ™NG
================================================================================

2.1. QUáº¢N LÃ (Admin)
    - ÄÄƒng nháº­p: TÃªn tÃ i khoáº£n + Máº­t kháº©u
    - Quyá»n háº¡n:
      * Táº¥t cáº£ quyá»n cá»§a nhÃ¢n viÃªn
      * Cáº¥p quyá»n truy cáº­p cho email nhÃ¢n viÃªn
      * Xem thá»‘ng kÃª doanh thu
      * Lá»c doanh thu theo ngÃ y/thÃ¡ng/nÄƒm
      * Lá»c doanh thu theo mÃ¡y/dÃ²ng mÃ¡y
      * PhÃ¢n tÃ­ch hiá»‡u quáº£ cho thuÃª
      * Quáº£n lÃ½ danh sÃ¡ch mÃ¡y áº£nh (thÃªm/sá»­a/xÃ³a)
      * Chá»‰nh sá»­a cÃ¡c cáº¥u hÃ¬nh há»‡ thá»‘ng

2.2. NHÃ‚N VIÃŠN (Employee)
    - ÄÄƒng nháº­p: Chá»‰ cáº§n Email (Ä‘Ã£ Ä‘Æ°á»£c Admin cáº¥p quyá»n)
    - Quyá»n háº¡n:
      * Xem lá»‹ch Ä‘áº·t
      * Táº¡o/sá»­a booking
      * Giao mÃ¡y cho khÃ¡ch
      * Thu mÃ¡y tá»« khÃ¡ch
      * Xá»­ lÃ½ khÃ´i phá»¥c tháº» nhá»›
      * TÃ¬m kiáº¿m thÃ´ng tin khÃ¡ch hÃ ng

================================================================================

III. QUY TRÃŒNH NGHIá»†P Vá»¤
================================================================================

3.1. LUá»’NG Táº O BOOKING Má»šI (Lá»‹ch Nháº­n)
--------------------------------------------------------------------------------

BÆ°á»›c 1: NhÃ¢n viÃªn má»Ÿ form "Táº¡o lá»‹ch má»›i"

BÆ°á»›c 2: Nháº­p thÃ´ng tin khÃ¡ch hÃ ng
    - TÃªn khÃ¡ch hÃ ng (báº¯t buá»™c)
    - Sá»‘ Ä‘iá»‡n thoáº¡i (báº¯t buá»™c)
    - Ná»n táº£ng liÃªn há»‡: IG, ZL, TT, FB, VL (chá»n tá»‘i Ä‘a 2)

BÆ°á»›c 3: Chá»n mÃ¡y áº£nh vÃ  phá»¥ kiá»‡n
    - Chá»n mÃ¡y áº£nh tá»« danh sÃ¡ch
      * Há»‡ thá»‘ng tá»± Ä‘á»™ng kiá»ƒm tra lá»‹ch trá»‘ng
      * Náº¿u dÃ²ng mÃ¡y khÃ´ng cÃ²n lá»‹ch trá»‘ng â†’ Äá» xuáº¥t mÃ¡y khÃ¡c cÃ³ lá»‹ch trá»‘ng
    - Tick náº¿u cÃ³ Tripod
      * Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng Tripod cÃ²n trá»‘ng
      * Náº¿u háº¿t â†’ BÃ¡o lá»—i: "Tripod khÃ´ng cÃ²n kháº£ dá»¥ng"
    - Tick náº¿u cÃ³ Háº¯t sÃ¡ng
      * Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng Háº¯t sÃ¡ng cÃ²n trá»‘ng
      * Náº¿u háº¿t â†’ BÃ¡o lá»—i: "Háº¯t sÃ¡ng khÃ´ng cÃ²n kháº£ dá»¥ng"
    - Ghi rÃµ phá»¥ kiá»‡n khÃ¡c (náº¿u cÃ³)

BÆ°á»›c 4: Chá»n thá»i gian
    - Thá»i gian nháº­n mÃ¡y (ngÃ y + giá» cá»¥ thá»ƒ)
    - Thá»i gian tráº£ mÃ¡y (ngÃ y + giá» cá»¥ thá»ƒ)

BÆ°á»›c 5: Xá»­ lÃ½ cá»c
    - ChÆ°a cá»c (máº·c Ä‘á»‹nh) â†’ Tráº¡ng thÃ¡i Äá»
    - ÄÃ£ cá»c 50.000 VNÄ (cá»c Ä‘áº·t lá»‹ch) â†’ Tráº¡ng thÃ¡i VÃ€NG
    - ÄÃ£ cá»c sá»‘ tiá»n khÃ¡c (nháº­p sá»‘) â†’ Tráº¡ng thÃ¡i VÃ€NG
    - Cá»c láº¡i CCCD:
      * Tick checkbox "Cá»c CCCD"
      * Nháº­p tÃªn trÃªn CCCD Ä‘á»ƒ nháº¯c nhá»Ÿ khi tráº£
      * LÆ°u Ã½: Chá»‰ cáº§n note khi khÃ¡ch cá»c CCCD váº­t lÃ½
    - KhÃ¡ch cÃ³ VNeID:
      * Tick checkbox "CÃ³ VNeID"
      * KhÃ´ng cáº§n nháº­p tÃªn CCCD
    - Cá»c láº¡i CCCD â†’ Nháº­p tÃªn trÃªn CCCD Ä‘á»ƒ nháº¯c nhá»Ÿ khi tráº£

BÆ°á»›c 6: Äá»‹a Ä‘iá»ƒm & PhÃ­ giao mÃ¡y
    - Nháº­p Ä‘á»‹a Ä‘iá»ƒm giao mÃ¡y (text)
    - Nháº­p phÃ­ giao mÃ¡y (nhÃ¢n viÃªn tá»± tÃ­nh: 8.000 VNÄ/km)

BÆ°á»›c 7: PhÃ­ thuÃª vÃ  chiáº¿t kháº¥u
    - Nháº­p phÃ­ thuÃª gá»‘c (S)
    - Tick náº¿u cÃ³ chiáº¿t kháº¥u:
      * Nháº­p % chiáº¿t kháº¥u
      * Chá»n lÃ½ do: Sinh nháº­t / DÃ i ngÃ y / Äá»ƒ láº¡i feedback / ThuÃª 2 mÃ¡y / KhÃ¡c
      * Há»‡ thá»‘ng tá»± tÃ­nh phÃ­ sau chiáº¿t kháº¥u (P)

BÆ°á»›c 8: Ghi nháº­n nhÃ¢n viÃªn lÃªn lá»‹ch
    - Chá»n tÃªn nhÃ¢n viÃªn (tá»« dropdown)

BÆ°á»›c 9: LÆ°u â†’ Booking hiá»ƒn thá»‹ trÃªn Calendar

--------------------------------------------------------------------------------

3.2. LUá»’NG GIAO MÃY (NgÃ y Ä‘áº¿n háº¡n nháº­n)
--------------------------------------------------------------------------------

BÆ°á»›c 1: NhÃ¢n viÃªn xem lá»‹ch nháº­n trong ngÃ y

BÆ°á»›c 2: Click vÃ o booking cáº§n giao

BÆ°á»›c 3: XÃ¡c nháº­n giao mÃ¡y
    - Chá»n tÃªn nhÃ¢n viÃªn bÃ n giao
    - Tick "ÄÃ£ giao mÃ¡y"

BÆ°á»›c 4: Xá»­ lÃ½ thanh toÃ¡n
    - Cá»c 50k lÃ  cá»c Ä‘áº·t lá»‹ch, khi khÃ¡ch nháº­n mÃ¡y thÃ¬ khÃ´ng cáº§n cá»c ná»¯a
    - KhÃ¡ch sáº½ thanh toÃ¡n luÃ´n vÃ o lÃºc nháº­n mÃ¡y
    - Cáº­p nháº­t tráº¡ng thÃ¡i thanh toÃ¡n â†’ Tráº¡ng thÃ¡i XANH (Ä‘Ã£ thanh toÃ¡n)

BÆ°á»›c 5: LÆ°u â†’ Booking Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u "ÄÃ£ giao"

--------------------------------------------------------------------------------

3.3. LUá»’NG TRáº¢ MÃY (Lá»‹ch Tráº£)
--------------------------------------------------------------------------------

BÆ°á»›c 1: NhÃ¢n viÃªn xem lá»‹ch tráº£ trong ngÃ y

BÆ°á»›c 2: Click vÃ o booking cáº§n thu mÃ¡y

BÆ°á»›c 3: Äiá»n thÃ´ng tin thu mÃ¡y
    - Xem láº¡i toÃ n bá»™ thÃ´ng tin booking
    - Chá»n tÃªn nhÃ¢n viÃªn thu mÃ¡y
    - Nháº­p Ä‘á»‹a Ä‘iá»ƒm thu mÃ¡y má»›i (náº¿u khÃ¡c Ä‘á»‹a Ä‘iá»ƒm giao)
    - Nháº­p phÃ­ giao mÃ¡y thu há»“i (náº¿u cÃ³)
    - Nháº¯c nhá»Ÿ phá»¥ kiá»‡n cáº§n thu láº¡i:
      * Náº¿u lá»‹ch nháº­n cÃ³ Tripod â†’ Nháº¯c thu láº¡i Tripod
      * Náº¿u lá»‹ch nháº­n cÃ³ Háº¯t sÃ¡ng â†’ Nháº¯c thu láº¡i Háº¯t sÃ¡ng
    
BÆ°á»›c 4: TÃ­nh phÃ­ tráº£ trá»… (náº¿u cÃ³)
    - CÃ´ng thá»©c: PhÃ­ tráº£ trá»… = GiÃ¡ 6 tiáº¿ng / 5
    - VÃ­ dá»¥: Canon R50 giÃ¡ 6h = 150k â†’ PhÃ­ trá»… = 30k/má»‘c
    - PhÃ­ tráº£ trá»… KHÃ”NG Ã¡p dá»¥ng chiáº¿t kháº¥u

BÆ°á»›c 5: Dá»‹ch vá»¥ thÃªm
    - Tick "KhÃ´i phá»¥c tháº» nhá»›" (náº¿u khÃ¡ch cáº§n)
    - Tick "Táº£i áº£nh lÃªn Drive" (náº¿u khÃ¡ch cáº§n)
    â†’ Náº¿u tick â†’ Táº¡o task má»›i trong má»¥c "KhÃ´i phá»¥c + Táº£i áº£nh"

BÆ°á»›c 6: Tráº£ CCCD cho khÃ¡ch (náº¿u cÃ³ cá»c CCCD)
    - Náº¿u khÃ¡ch cá»c CCCD váº­t lÃ½:
      * Há»‡ thá»‘ng nháº¯c nhá»Ÿ tÃªn trÃªn CCCD cáº§n tráº£
      * NhÃ¢n viÃªn tick xÃ¡c nháº­n Ä‘Ã£ tráº£ CCCD
    - Náº¿u khÃ¡ch cÃ³ VNeID:
      * KhÃ´ng cáº§n tráº£ CCCD
      * KhÃ´ng cÃ³ nháº¯c nhá»Ÿ

BÆ°á»›c 7: Cáº­p nháº­t thanh toÃ¡n
    - ÄÃ£ thanh toÃ¡n Ä‘á»§ â†’ Tráº¡ng thÃ¡i XANH

BÆ°á»›c 8: LÆ°u â†’ Booking hoÃ n thÃ nh

--------------------------------------------------------------------------------

3.4. LUá»’NG KHÃ”I PHá»¤C THáºº NHá»š + Táº¢I áº¢NH
--------------------------------------------------------------------------------

BÆ°á»›c 1: Má»Ÿ má»¥c "KhÃ´i phá»¥c + Táº£i áº£nh"
    - Danh sÃ¡ch cÃ¡c task cáº§n xá»­ lÃ½

BÆ°á»›c 2: Äiá»n mÃ£ sá»‘ tháº» nhá»›
    - Äá»ƒ dá»… tÃ¬m láº¡i sau nÃ y

BÆ°á»›c 3: Xá»­ lÃ½ tá»«ng bÆ°á»›c (tick khi hoÃ n thÃ nh):
    â–¡ ÄÃ£ khÃ´i phá»¥c
    â–¡ ÄÃ£ táº£i áº£nh lÃªn Drive
    â–¡ ÄÃ£ gá»­i link cho khÃ¡ch
    â–¡ KhÃ¡ch khÃ´ng bÃ¡o lá»—i sau 24 giá»

BÆ°á»›c 4: Khi tick háº¿t cáº£ 4 má»¥c
    - Hiá»ƒn thá»‹ nÃºt "XÃ³a thÃ´ng tin"
    - XÃ³a Ä‘á»ƒ xÃ¡c nháº­n Ä‘Ã£ hoÃ n thÃ nh

--------------------------------------------------------------------------------

3.5. LUá»’NG QUáº¢N LÃ NHÃ‚N VIÃŠN (Chá»‰ Admin)
--------------------------------------------------------------------------------

BÆ°á»›c 1: VÃ o má»¥c "Quáº£n lÃ½ nhÃ¢n viÃªn"

BÆ°á»›c 2: ThÃªm nhÃ¢n viÃªn má»›i
    - Nháº­p email nhÃ¢n viÃªn
    - Nháº­p tÃªn nhÃ¢n viÃªn
    - LÆ°u â†’ NhÃ¢n viÃªn cÃ³ thá»ƒ Ä‘Äƒng nháº­p báº±ng email

BÆ°á»›c 3: Quáº£n lÃ½ quyá»n truy cáº­p
    - Báº­t/táº¯t quyá»n truy cáº­p cá»§a tá»«ng nhÃ¢n viÃªn
    - XÃ³a nhÃ¢n viÃªn (náº¿u cáº§n)

================================================================================

IV. GIAO DIá»†N CALENDAR
================================================================================

4.1. Cáº¥u trÃºc hiá»ƒn thá»‹ (giá»‘ng Excel máº«u):
    - HÃ ng: Má»—i mÃ¡y áº£nh lÃ  1 hÃ ng
    - Cá»™t: Má»—i ngÃ y lÃ  1 cá»™t (theo tuáº§n hoáº·c thÃ¡ng)
    - Ã”: Hiá»ƒn thá»‹ thÃ´ng tin booking

4.2. MÃ£ mÃ u tráº¡ng thÃ¡i:
    ğŸ”´ Äá»    = ChÆ°a cá»c (payment_status = 'pending')
    ğŸŸ¡ VÃ€NG  = ÄÃ£ cá»c (payment_status = 'deposited')
    ğŸŸ¢ XANH  = ÄÃ£ thanh toÃ¡n (payment_status = 'paid')

4.3. Hiá»ƒn thá»‹ trong Ã´ booking:

    Lá»‹ch NHáº¬N:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ N: 09h00 (0912345678)       â”‚
    â”‚ Minh Khang (Meta)           â”‚
    â”‚ Tripod + Háº¯t sÃ¡ng           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Lá»‹ch TRáº¢:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ T: 18h00 (0912345678)       â”‚
    â”‚ Minh Khang (Meta)           â”‚
    â”‚ CCCD: Nguyá»…n Minh Khang     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4.4. GiÃ¡ thuÃª:
    - S: PhÃ­ thuÃª gá»‘c
    - P: PhÃ­ thuÃª sau chiáº¿t kháº¥u

4.5. Timeline thá»i gian thá»±c:
    - ÄÆ°á»ng káº» chá»‰ thá»i gian hiá»‡n táº¡i
    - Auto-scroll Ä‘áº¿n thá»i gian hiá»‡n táº¡i
    - TÃ¡c vá»¥ quÃ¡ háº¡n chÆ°a hoÃ n thÃ nh â†’ Chuyá»ƒn mÃ u Äá»
    - TÃ¡c vá»¥ Ä‘Ã£ hoÃ n thÃ nh â†’ Giá»¯ mÃ u XANH

================================================================================

V. TÃNH NÄ‚NG TÃŒM KIáº¾M
================================================================================

5.1. Thanh tÃ¬m kiáº¿m nhanh:
    - TÃ¬m theo tÃªn khÃ¡ch hÃ ng
    - TÃ¬m theo sá»‘ Ä‘iá»‡n thoáº¡i
    - TÃ¬m theo mÃ£ booking
    - TÃ¬m theo tÃªn mÃ¡y áº£nh

5.2. Káº¿t quáº£ tÃ¬m kiáº¿m:
    - Hiá»ƒn thá»‹ danh sÃ¡ch booking phÃ¹ há»£p
    - Click Ä‘á»ƒ xem chi tiáº¿t

5.3. HIá»‚N THá»Š Lá»ŠCH TRá»NG:
    - TrÃªn calendar, Ã´ nÃ o khÃ´ng cÃ³ booking â†’ hiá»ƒn thá»‹ mÃ u tráº¯ng/xÃ¡m nháº¡t
    - Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng mÃ¡y cÃ²n trá»‘ng: "CÃ²n X/Y mÃ¡y"
    - Náº¿u mÃ¡y cÃ³ SL > 1 vÃ  Ä‘ang cÃ³ booking: hiá»ƒn thá»‹ "(X/Y Ä‘ang thuÃª)"
    
    VD: Canon M100 (SL=2)
        - KhÃ´ng cÃ³ booking â†’ "2/2 mÃ¡y trá»‘ng" (mÃ u xÃ¡m nháº¡t)
        - CÃ³ 1 booking â†’ "1/2 Ä‘ang thuÃª" (1 Ã´ mÃ u theo tráº¡ng thÃ¡i)
        - CÃ³ 2 booking â†’ "Háº¿t mÃ¡y" (2 Ã´ mÃ u)

5.4. TÃŒM MÃY TRá»NG THEO THá»œI GIAN:
    - NhÃ¢n viÃªn nháº­p: NgÃ y nháº­n + NgÃ y tráº£
    - Há»‡ thá»‘ng hiá»ƒn thá»‹:
      * Danh sÃ¡ch mÃ¡y CÃ’N TRá»NG trong khoáº£ng thá»i gian Ä‘Ã³
      * Sá»‘ lÆ°á»£ng cÃ²n trá»‘ng cá»§a má»—i model
      * Loáº¡i bá» mÃ¡y Ä‘Ã£ cÃ³ booking trÃ¹ng thá»i gian
    
    VD: TÃ¬m tá»« 1/1 Ä‘áº¿n 3/1
        â†’ Canon M10: 1 mÃ¡y trá»‘ng
        â†’ Canon M100: 2 mÃ¡y trá»‘ng
        â†’ Canon R50: Háº¿t mÃ¡y (Ä‘Ã£ cÃ³ booking)

5.5. Gá»¢I Ã KHI Táº O BOOKING:
    - Khi nhÃ¢n viÃªn chá»n thá»i gian nháº­n/tráº£
    - Tá»± Ä‘á»™ng lá»c dropdown mÃ¡y áº£nh:
      * Chá»‰ hiá»ƒn thá»‹ mÃ¡y CÃ’N TRá»NG
      * MÃ¡y háº¿t â†’ disabled/áº©n hoáº·c ghi "(Háº¿t)"
      * Náº¿u dÃ²ng mÃ¡y khÃ´ng cÃ²n lá»‹ch trá»‘ng:
        â†’ Há»‡ thá»‘ng Ä‘á» xuáº¥t nhá»¯ng mÃ¡y khÃ¡c cÃ³ lá»‹ch trá»‘ng
        â†’ Hiá»ƒn thá»‹ danh sÃ¡ch mÃ¡y thay tháº¿ vá»›i sá»‘ lÆ°á»£ng cÃ²n trá»‘ng
    - TÆ°Æ¡ng tá»± cho phá»¥ kiá»‡n (tripod, háº¯t sÃ¡ng):
      * Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng cÃ²n trá»‘ng
      * Náº¿u háº¿t â†’ BÃ¡o lá»—i: "Tripod/Háº¯t sÃ¡ng khÃ´ng cÃ²n kháº£ dá»¥ng"

================================================================================

VI. THá»NG KÃŠ & BÃO CÃO (Chá»‰ Admin)
================================================================================

6.1. Bá»™ lá»c:
    - Theo ngÃ y cá»¥ thá»ƒ
    - Theo thÃ¡ng
    - Theo nÄƒm
    - Theo khoáº£ng thá»i gian tÃ¹y chá»n

6.2. BÃ¡o cÃ¡o doanh thu:
    - Tá»•ng doanh thu (theo bá»™ lá»c)
    - Doanh thu theo tá»«ng mÃ¡y
    - Doanh thu theo dÃ²ng mÃ¡y (Canon M, Canon R...)
    - Trung bÃ¬nh doanh thu/mÃ¡y
    - Sá»‘ lÆ°á»£t cho thuÃª

6.3. PhÃ¢n tÃ­ch hiá»‡u quáº£:
    - MÃ¡y nÃ o Ä‘Æ°á»£c thuÃª nhiá»u nháº¥t
    - MÃ¡y nÃ o Ã­t Ä‘Æ°á»£c thuÃª
    - Tá»· lá»‡ sá»­ dá»¥ng tá»«ng mÃ¡y
    - Doanh thu/ngÃ y cho thuÃª

================================================================================

VII. Cáº¤U HÃŒNH Há»† THá»NG (Chá»‰ Admin)
================================================================================

7.1. Cáº¥u hÃ¬nh giÃ¡ cÃ³ thá»ƒ chá»‰nh sá»­a:
    - PhÃ­ giao mÃ¡y / km (máº·c Ä‘á»‹nh: 8.000 VNÄ)
    - Cá»c máº·c Ä‘á»‹nh (máº·c Ä‘á»‹nh: 50.000 VNÄ)
    - Há»‡ sá»‘ tÃ­nh phÃ­ tráº£ trá»… (máº·c Ä‘á»‹nh: chia 5)

7.2. Quáº£n lÃ½ mÃ¡y áº£nh:
    - ThÃªm mÃ¡y má»›i
    - Sá»­a thÃ´ng tin mÃ¡y (tÃªn, giÃ¡, sá»‘ lÆ°á»£ng)
    - XÃ³a mÃ¡y
    - Sá»‘ lÆ°á»£ng tripod/háº¯t sÃ¡ng Ä‘i kÃ¨m

7.3. Danh sÃ¡ch mÃ¡y áº£nh (vÃ­ dá»¥):
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
    â”‚ TÃªn mÃ¡y      â”‚ GiÃ¡ 6h  â”‚ GiÃ¡ 1 ngÃ yâ”‚ GiÃ¡ +ngÃ yâ”‚ SL  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
    â”‚ Canon M10    â”‚ 200.000 â”‚ 200.000 â”‚ 150.000 â”‚  1  â”‚
    â”‚ Canon M100   â”‚ 220.000 â”‚ 220.000 â”‚ 170.000 â”‚  2  â”‚
    â”‚ Canon R50    â”‚ 300.000 â”‚ 300.000 â”‚ 250.000 â”‚  1  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
    
    LÆ°u Ã½:
    - GiÃ¡ 6h: GiÃ¡ thuÃª trong 6 giá» Ä‘áº§u
    - GiÃ¡ 1 ngÃ y: GiÃ¡ thuÃª cho ngÃ y Ä‘áº§u tiÃªn (24 giá»)
    - GiÃ¡ +ngÃ y: GiÃ¡ thuÃª tá»« ngÃ y thá»© 2 trá»Ÿ Ä‘i
    - VÃ­ dá»¥: ThuÃª Canon M10 3 ngÃ y
      * NgÃ y 1: 200.000 VNÄ
      * NgÃ y 2: 150.000 VNÄ
      * NgÃ y 3: 150.000 VNÄ
      * Tá»•ng: 500.000 VNÄ

================================================================================

VIII. CÃ”NG THá»¨C TÃNH PHÃ
================================================================================

8.1. PhÃ­ thuÃª cuá»‘i cÃ¹ng:
    P = S Ã— (1 - Chiáº¿t kháº¥u%)
    
    Trong Ä‘Ã³ S Ä‘Æ°á»£c tÃ­nh theo cÃ´ng thá»©c:
    - Náº¿u thuÃª â‰¤ 6 giá»: S = GiÃ¡ 6h
    - Náº¿u thuÃª â‰¤ 24 giá» (1 ngÃ y): S = GiÃ¡ 1 ngÃ y
    - Náº¿u thuÃª > 24 giá»:
      * NgÃ y Ä‘áº§u: GiÃ¡ 1 ngÃ y
      * CÃ¡c ngÃ y tiáº¿p theo: GiÃ¡ +ngÃ y Ã— sá»‘ ngÃ y
      * S = GiÃ¡ 1 ngÃ y + (GiÃ¡ +ngÃ y Ã— sá»‘ ngÃ y tiáº¿p theo)
    
    VÃ­ dá»¥: ThuÃª Canon M10 3 ngÃ y
    - GiÃ¡ 1 ngÃ y = 200.000
    - GiÃ¡ +ngÃ y = 150.000
    - S = 200.000 + (150.000 Ã— 2) = 500.000 VNÄ
    - Náº¿u chiáº¿t kháº¥u 10%: P = 500.000 Ã— 0.9 = 450.000 VNÄ

8.2. PhÃ­ tráº£ trá»…:
    PhÃ­ trá»… = GiÃ¡ 6 tiáº¿ng / 5
    
    VÃ­ dá»¥: Canon R50 giÃ¡ 6h = 150.000
    â†’ PhÃ­ trá»… má»—i má»‘c = 150.000 / 5 = 30.000 VNÄ
    
    âš ï¸ LÆ°u Ã½: PhÃ­ tráº£ trá»… KHÃ”NG Ä‘Æ°á»£c chiáº¿t kháº¥u

8.3. PhÃ­ giao mÃ¡y:
    PhÃ­ giao = Khoáº£ng cÃ¡ch (km) Ã— 8.000 VNÄ
    
    VÃ­ dá»¥: Giao mÃ¡y 5km
    â†’ PhÃ­ giao = 5 Ã— 8.000 = 40.000 VNÄ

8.4. Tá»•ng thanh toÃ¡n:
    Tá»•ng = P + PhÃ­ trá»… + PhÃ­ giao nháº­n + PhÃ­ giao tráº£

================================================================================

IX. Dá»® LIá»†U LÆ¯U TRá»® (NORMALIZED SCHEMA)
================================================================================

*** THIáº¾T Káº¾ THEO HÆ¯á»šNG NORMALIZE Äá»‚ Dá»„ QUERY VÃ€ Báº¢O TRÃŒ ***

9.1. Báº£ng cameras (MÃ¡y áº£nh):
    - id (UUID)
    - name: TÃªn mÃ¡y (VD: "Canon M10")
    - model_line: DÃ²ng mÃ¡y (VD: "Canon M", "Canon R")
    - price_6h: GiÃ¡ thuÃª 6 giá»
    - price_24h: GiÃ¡ thuÃª 1 ngÃ y (ngÃ y Ä‘áº§u tiÃªn)
    - price_additional_day: GiÃ¡ thuÃª +ngÃ y (tá»« ngÃ y thá»© 2 trá»Ÿ Ä‘i)
    - quantity: Sá»‘ lÆ°á»£ng mÃ¡y cÃ¹ng model (VD: Canon M100 cÃ³ 2 mÃ¡y)
    - is_active: Tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng
    
    LÆ°u Ã½: KhÃ´ng cÃ³ price_12h, chá»‰ cÃ³ 3 má»©c giÃ¡: 6h, 1 ngÃ y, +ngÃ y

9.2. Báº£ng accessories (Phá»¥ kiá»‡n cÃ³ sáºµn):
    - id (UUID)
    - type: 'tripod' | 'reflector' | 'other'
    - name: TÃªn phá»¥ kiá»‡n
    - quantity: Sá»‘ lÆ°á»£ng tá»“n kho
    - price: GiÃ¡ thuÃª (náº¿u cÃ³)

9.3. Báº£ng customers (KhÃ¡ch hÃ ng):
    - id (UUID)
    - name: TÃªn khÃ¡ch
    - phone: Sá»‘ Ä‘iá»‡n thoáº¡i
    - platforms[]: Ná»n táº£ng liÃªn há»‡ ['IG', 'ZL', 'TT', 'FB', 'VL']
    
    âš ï¸ LÆ¯U Ã: CCCD KHÃ”NG lÆ°u á»Ÿ Ä‘Ã¢y (lÆ°u theo tá»«ng booking)

9.4. Báº£ng bookings (ThÃ´ng tin chung cá»§a Ä‘Æ¡n thuÃª):
    - id (UUID)
    - customer_id â†’ customers
    - created_by â†’ employees (NV lÃªn lá»‹ch)
    
    -- Thá»i gian --
    - pickup_time: Thá»i gian nháº­n
    - return_time: Thá»i gian tráº£
    
    -- Thanh toÃ¡n --
    - payment_status: 'pending' | 'deposited' | 'paid'
    - deposit_type: 'none' | 'default' | 'custom' | 'cccd' | 'vneid'
    - deposit_amount: Sá»‘ tiá»n cá»c (50k lÃ  cá»c Ä‘áº·t lá»‹ch)
    - cccd_name: TÃªn trÃªn CCCD (chá»‰ lÆ°u khi deposit_type = 'cccd')
    - has_vneid: Boolean - KhÃ¡ch cÃ³ VNeID (khÃ´ng cáº§n cá»c CCCD)
    
    LÆ°u Ã½:
    - Cá»c 50k lÃ  cá»c Ä‘áº·t lá»‹ch, khi khÃ¡ch nháº­n mÃ¡y thÃ¬ thanh toÃ¡n luÃ´n
    - Náº¿u deposit_type = 'cccd': pháº£i nháº­p cccd_name
    - Náº¿u has_vneid = true: khÃ´ng cáº§n nháº­p cccd_name
    
    -- PhÃ­ & Chiáº¿t kháº¥u --
    - total_rental_fee: Tá»•ng phÃ­ thuÃª gá»‘c (S)
    - discount_percent: % chiáº¿t kháº¥u
    - discount_reason: LÃ½ do chiáº¿t kháº¥u
    - final_fee: PhÃ­ sau chiáº¿t kháº¥u (P)
    - late_fee: PhÃ­ tráº£ trá»…
    - total_delivery_fee: Tá»•ng phÃ­ giao mÃ¡y

9.5. Báº£ng booking_items (MÃ¡y thuÃª trong 1 booking):
    - id (UUID)
    - booking_id â†’ bookings
    - camera_id â†’ cameras
    - quantity: Sá»‘ lÆ°á»£ng thuÃª (VD: thuÃª 2 Canon M100)
    - unit_price: ÄÆ¡n giÃ¡ (giÃ¡ 6h/12h/24h tÃ¹y thá»i gian thuÃª)
    - subtotal: ThÃ nh tiá»n

    *** CHO PHÃ‰P 1 BOOKING THUÃŠ NHIá»€U MÃY ***

9.6. Báº£ng booking_accessories (Phá»¥ kiá»‡n trong booking):
    - id (UUID)
    - booking_id â†’ bookings
    - accessory_type: 'tripod' | 'reflector' | 'other'
    - name: TÃªn (náº¿u type = 'other')
    - quantity: Sá»‘ lÆ°á»£ng
    - note: Ghi chÃº

9.7. Báº£ng tasks (Task nháº­n/tráº£ mÃ¡y):
    - id (UUID)
    - booking_id â†’ bookings
    - type: 'pickup' | 'return'
    - due_at: Thá»i gian háº¹n
    - completed_at: Thá»i gian hoÃ n thÃ nh (null náº¿u chÆ°a)
    - staff_id â†’ employees (NV thá»±c hiá»‡n)
    - location: Äá»‹a Ä‘iá»ƒm
    - delivery_fee: PhÃ­ giao mÃ¡y

    *** Má»–I BOOKING CÃ“ 2 TASK: 1 PICKUP + 1 RETURN ***

9.8. Báº£ng recovery_tasks (KhÃ´i phá»¥c tháº» nhá»›):
    - id (UUID)
    - booking_id â†’ bookings
    - memory_card_code: MÃ£ tháº» nhá»›
    - need_recovery: Cáº§n khÃ´i phá»¥c
    - need_upload: Cáº§n táº£i lÃªn Drive
    - is_recovered: ÄÃ£ khÃ´i phá»¥c
    - is_uploaded: ÄÃ£ táº£i lÃªn
    - is_link_sent: ÄÃ£ gá»­i link
    - no_error_24h: KhÃ¡ch khÃ´ng bÃ¡o lá»—i sau 24h
    - completed_at: Thá»i gian hoÃ n thÃ nh

    *** CHá»ˆ Táº O KHI RETURN TASK TICK RECOVERY/UPLOAD ***

9.9. Báº£ng employees (NhÃ¢n viÃªn):
    - id (UUID)
    - email: Email Ä‘Äƒng nháº­p
    - name: TÃªn nhÃ¢n viÃªn
    - is_active: ÄÆ°á»£c phÃ©p Ä‘Äƒng nháº­p
    - approved_by â†’ admins

9.10. Báº£ng admins (Quáº£n lÃ½):
    - id (UUID)
    - username: TÃªn Ä‘Äƒng nháº­p
    - password_hash: Máº­t kháº©u Ä‘Ã£ hash
    - name: TÃªn hiá»ƒn thá»‹

9.11. Báº£ng settings (Cáº¥u hÃ¬nh):
    - delivery_fee_per_km: 8000 VNÄ (máº·c Ä‘á»‹nh)
    - default_deposit: 50000 VNÄ (máº·c Ä‘á»‹nh)
    - late_fee_divisor: 5 (phÃ­ trá»… = giÃ¡ 6h / 5)

================================================================================

X. QUY Táº®C CHá»NG TRÃ™NG Lá»ŠCH (CONFLICT DETECTION)
================================================================================

10.1. Hiá»ƒn thá»‹ Calendar theo MODEL (MVP):
    - Má»—i hÃ ng = 1 model mÃ¡y (VD: Canon M100)
    - Náº¿u model cÃ³ SL > 1: hiá»ƒn thá»‹ "Ä‘ang dÃ¹ng X/Y"
    - VD: Canon M100 (SL=2), cÃ³ 1 booking â†’ hiá»ƒn thá»‹ "1/2"

10.2. Khi táº¡o booking má»›i, há»‡ thá»‘ng PHáº¢I kiá»ƒm tra:

    A) Kiá»ƒm tra mÃ¡y áº£nh:
       - Äáº¿m sá»‘ mÃ¡y Ä‘ang Ä‘Æ°á»£c thuÃª trong khoáº£ng thá»i gian
       - So sÃ¡nh vá»›i quantity cá»§a model
       - Náº¿u vÆ°á»£t quÃ¡ â†’ BÃO Lá»–I, khÃ´ng cho lÆ°u

       VD: Canon M100 cÃ³ SL=2
           - Thá»i gian 1/1 - 3/1: Ä‘Ã£ cÃ³ 2 booking
           - KhÃ¡ch má»›i muá»‘n thuÃª 2/1: KHÃ”NG CHO PHÃ‰P

    B) Kiá»ƒm tra phá»¥ kiá»‡n:
       - TÆ°Æ¡ng tá»±, Ä‘áº¿m tripod/háº¯t sÃ¡ng Ä‘ang cho thuÃª
       - So sÃ¡nh vá»›i tá»“n kho
       - Náº¿u vÆ°á»£t â†’ BÃO Lá»–I

10.3. CÃ´ng thá»©c kiá»ƒm tra conflict:

    available_qty = camera.quantity - COUNT(booking_items 
        WHERE camera_id = X 
        AND pickup_time < new_return_time 
        AND return_time > new_pickup_time
        AND booking.payment_status != 'cancelled'
    )

    IF available_qty < requested_qty THEN
        â†’ REJECT: "MÃ¡y X chá»‰ cÃ²n {available_qty} mÃ¡y trong khoáº£ng thá»i gian nÃ y"

10.4. TÃ¹y chá»n tÆ°Æ¡ng lai (sau MVP):
    - Admin override: cho phÃ©p vÆ°á»£t tá»“n kho (trÆ°á»ng há»£p Ä‘áº·c biá»‡t)
    - Hiá»ƒn thá»‹ theo UNIT (M100-01, M100-02) thay vÃ¬ MODEL

================================================================================

XI. Káº¾ HOáº CH TRIá»‚N KHAI
================================================================================

Giai Ä‘oáº¡n 1: Setup cÆ¡ sá»Ÿ (1 ngÃ y)
    â–¡ Táº¡o project Supabase
    â–¡ Thiáº¿t káº¿ vÃ  táº¡o database schema
    â–¡ Khá»Ÿi táº¡o project Next.js

Giai Ä‘oáº¡n 2: Authentication (1 ngÃ y)
    â–¡ Trang Ä‘Äƒng nháº­p Admin/Employee
    â–¡ PhÃ¢n quyá»n truy cáº­p

Giai Ä‘oáº¡n 3: Calendar & Booking (1 ngÃ y)
    â–¡ Giao diá»‡n Calendar
    â–¡ Form táº¡o/sá»­a booking
    â–¡ Hiá»ƒn thá»‹ tráº¡ng thÃ¡i mÃ u sáº¯c

Giai Ä‘oáº¡n 4: TÃ­nh nÄƒng bá»• sung (1 ngÃ y)
    â–¡ Trang khÃ´i phá»¥c tháº» nhá»›
    â–¡ TÃ¬m kiáº¿m khÃ¡ch hÃ ng
    â–¡ Timeline thá»i gian thá»±c

Giai Ä‘oáº¡n 5: Admin Features (1 ngÃ y)
    â–¡ Quáº£n lÃ½ nhÃ¢n viÃªn
    â–¡ Thá»‘ng kÃª doanh thu
    â–¡ Cáº¥u hÃ¬nh há»‡ thá»‘ng

Giai Ä‘oáº¡n 6: Testing & Polish (1 ngÃ y)
    â–¡ Kiá»ƒm thá»­ toÃ n bá»™ luá»“ng
    â–¡ Tá»‘i Æ°u giao diá»‡n
    â–¡ Sá»­a lá»—i

================================================================================

                              === Háº¾T ===

================================================================================
